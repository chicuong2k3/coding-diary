@page "/blog/sample2"


<PageTitle>My first test page 2</PageTitle>

<div class="content">
    <h1>My first test page 2</h1>

    <p>Trong c√°c ·ª©ng d·ª•ng web v√† API ng√†y nay, b·∫£o m·∫≠t l√† m·ªôt ph·∫ßn kh√¥ng th·ªÉ thi·∫øu. D√π b·∫°n
x√¢y d·ª±ng h·ªá th·ªëng qu·∫£n l√Ω n·ªôi b·ªô, th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ hay ·ª©ng d·ª•ng SaaS th√¨ vi·ªác ƒë·∫£m b·∫£o
ng∆∞·ªùi d√πng <strong>ƒë∆∞·ª£c x√°c th·ª±c ch√≠nh x√°c</strong> v√† <strong>ch·ªâ truy c·∫≠p ƒë∆∞·ª£c t√†i nguy√™n h·ªç ƒë∆∞·ª£c ph√©p</strong>
l√† h·∫øt s·ª©c quan trong. B√†i vi·∫øt n√†y s·∫Ω gi√∫p b·∫°n n·∫Øm r√µ:</p>
<ul>
<li><a href="/post/authentication-va-authorization-trong-net#authentication-va-authorization-la-gi">Ph√¢n bi·ªát Authentication v√† Authorization</a></li>
<li><a href="/post/authentication-va-authorization-trong-net#kien-truc-authentication-trong.net">Hi·ªÉu ki·∫øn tr√∫c Authentication trong .NET</a></li>
<li><a href="/post/authentication-va-authorization-trong-net#kien-truc-authorization-trong.net">Hi·ªÉu ki·∫øn tr√∫c Authorization trong .NET</a></li>
<li><a href="/post/authentication-va-authorization-trong-net#cookie-authentication-thuong-dung-cho-web-app-nhu.net-mvc-va-razor-pages">Tri·ªÉn khai Cookie Authentication</a></li>
<li><a href="/post/authentication-va-authorization-trong-net#jwt-bearer-authentication-thuong-dung-cho-api">Tri·ªÉn khai JWT Bearer Authentication</a></li>
<li><a href="/post/authentication-va-authorization-trong-net#authorization-kiem-soat-quyen-truy-cap">Kh√°m ph√° c√°c c∆° ch·∫ø Authorization</a></li>
</ul>
<h1 id="authentication-va-authorization-la-gi">Authentication v√† Authorization l√† g√¨?</h1>
<p>Ch√∫ng ta c·∫ßn ph√¢n bi·ªát r√µ hai kh√°i ni·ªám quan tr·ªçng
m√† m·ªçi l·∫≠p tr√¨nh vi√™n ƒë·ªÅu ph·∫£i n·∫Øm v·ªØng l√† Authentication (x√°c th·ª±c) v√† Authorization (ph√¢n quy·ªÅn).
D√π nghe c√≥ v·∫ª quen thu·ªôc nh∆∞ng r·∫•t nhi·ªÅu ng∆∞·ªùi v·∫´n nh·∫ßm l·∫´n gi·ªØa ch√∫ng.</p>
<ul>
<li>Authentication (X√°c th·ª±c): L√† qu√° tr√¨nh x√°c minh danh t√≠nh c·ªßa m·ªôt ng∆∞·ªùi, t·ª©c l√† ki·ªÉm
tra xem b·∫°n th·∫≠t s·ª± l√† ai. V√≠ d·ª• nh∆∞ khi b·∫°n ƒë·∫øn s√¢n bay, nh√¢n vi√™n an ninh y√™u c·∫ßu b·∫°n
xu·∫•t tr√¨nh cƒÉn c∆∞·ªõc c√¥ng d√¢n ho·∫∑c h·ªô chi·∫øu v√† v√© m√°y bay. H·ªç ki·ªÉm tra ·∫£nh, t√™n v√† m√£ v√© ƒë·ªÉ
ch·∫Øc ch·∫Øn r·∫±ng b·∫°n ch√≠nh l√† ng∆∞·ªùi ƒë√£ ƒë·∫∑t v√©. ƒê√≥ ch√≠nh l√† x√°c th·ª±c.</li>
<li>Authorization (Ph√¢n quy·ªÅn): L√† qu√° tr√¨nh ki·ªÉm tra quy·ªÅn h·∫°n truy c·∫≠p ho·∫∑c h√†nh ƒë·ªông
m√† b·∫°n ƒë∆∞·ª£c ph√©p th·ª±c hi·ªán sau khi ƒë√£ x√°c th·ª±c danh t√≠nh. V√≠ d·ª• nh∆∞ sau khi b·∫°n ƒë√£ qua c·ª≠a
an ninh v√† l√™n m√°y bay, v√© h·∫°ng ph·ªï th√¥ng (Economy) ch·ªâ cho ph√©p b·∫°n ng·ªìi ·ªü khoang ph·ªï th√¥ng,
trong khi v√© h·∫°ng th∆∞∆°ng gia (Business Class) ƒë∆∞·ª£c ph√©p ng·ªìi ·ªü khoang ri√™ng v√† s·ª≠ d·ª•ng ph√≤ng ch·ªù VIP.
D√π c·∫£ hai h√†nh kh√°ch ƒë·ªÅu ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c, quy·ªÅn truy c·∫≠p c·ªßa h·ªç kh√°c nhau d·ª±a tr√™n &quot;vai tr√≤&quot; (class).
ƒê√¢y ch√≠nh l√† ph√¢n quy·ªÅn.</li>
</ul>
<div class="mermaid"> 
flowchart LR
    A[H√†nh kh√°ch ƒë·∫øn s√¢n bay] --> B[X√°c th·ª±c danh t√≠nh - ki·ªÉm tra CCCD ho·∫∑c h·ªô chi·∫øu v√† v√©]
    B --> C{ƒê√£ x√°c th·ª±c h·ª£p l·ªá?}
    C -- Kh√¥ng --> D[Kh√¥ng cho ph√©p l√™n m√°y bay]
    C -- C√≥ --> E[Ph√¢n quy·ªÅn theo lo·∫°i v√©]
    E --> F[V√© Economy - Khoang ph·ªï th√¥ng]
    E --> G[V√© Business - Ph√≤ng ch·ªù VIP + khoang th∆∞∆°ng gia]
</div>
<p>T√≥m l·∫°i th√¨:</p>
<blockquote class="blockquote">
<p><strong>Authentication</strong> tr·∫£ l·ªùi cho c√¢u h·ªèi <strong>B·∫°n l√† ai</strong><br />
<strong>Authorization</strong> tr·∫£ l·ªùi cho c√¢u h·ªèi <strong>B·∫°n ƒë∆∞·ª£c ph√©p l√†m g√¨</strong></p>
</blockquote>
<h1 id="kien-truc-authentication-trong.net">Ki·∫øn tr√∫c Authentication trong .NET</h1>
<p>H·ªá th·ªëng Authentication trong .NET ƒë∆∞·ª£c t·ªï ch·ª©c d·ª±a tr√™n 5 th√†nh ph·∫ßn ch√≠nh:</p>
<h2 id="authentication-middleware">Authentication Middleware</h2>
<p>Middleware n√†y ƒë∆∞·ª£c th√™m v√†o pipeline b·∫±ng d√≤ng sau:</p>
<pre><code class="language-csharp">app.UseAuthentication();

</code></pre>
<p>Middleware n√†y l√† ƒëi·ªÉm kh·ªüi ƒë·∫ßu cho qu√° tr√¨nh x√°c th·ª±c: khi c√≥ request ƒë·∫øn, Middleware s·∫Ω g·ªçi
ph∆∞∆°ng th·ª©c <code>AuthenticateAsync()</code> c·ªßa interface <code>IAuthenticationService</code> (xem b√™n d∆∞·ªõi) ƒë·ªÉ x√°c ƒë·ªãnh ng∆∞·ªùi d√πng hi·ªán t·∫°i.
N·∫øu th√†nh c√¥ng, <code>ClaimsPrincipal</code> s·∫Ω ƒë∆∞·ª£c g√°n v√†o <code>HttpContext.User</code>.</p>
<blockquote class="blockquote">
<p>üí° Tip: <code>app.UseAuthentication()</code> ch·ªâ thi·∫øt l·∫≠p <code>HttpContext.User</code>, n√≥ kh√¥ng ch·∫∑n request.
Vi·ªác ch·∫∑n request (v√≠ d·ª• y√™u c·∫ßu ƒëƒÉng nh·∫≠p ho·∫∑c tr·∫£ v·ªÅ 401) do <code>UseAuthorization()</code> ƒë·∫£m nhi·ªám ·ªü b∆∞·ªõc sau.</p>
</blockquote>
<h2 id="iauthenticationservice">IAuthenticationService</h2>
<p>ƒê√¢y l√† b·ªô ƒëi·ªÅu ph·ªëi trung t√¢m, n√≥ quy·∫øt ƒë·ªãnh handler (xem b√™n d∆∞·ªõi) n√†o s·∫Ω th·ª±c hi·ªán vi·ªác x√°c th·ª±c d·ª±a
tr√™n <code>AuthenticationScheme</code> (xem b√™n d∆∞·ªõi) ƒë∆∞·ª£c c·∫•u h√¨nh. Interface n√†y cung c·∫•p c√°c ph∆∞∆°ng th·ª©c sau:</p>
<ul>
<li><code>AuthenticateAsync</code>: X√°c th·ª±c y√™u c·∫ßu hi·ªán t·∫°i v√† tr·∫£ v·ªÅ <code>AuthenticateResult</code>.</li>
<li><code>ChallengeAsync()</code>: Ph·∫£n h·ªìi khi y√™u c·∫ßu c·∫ßn x√°c th·ª±c (redirect ho·∫∑c HTTP 401).</li>
<li><code>ForbidAsync()</code>: Ph·∫£n h·ªìi khi ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p nh∆∞ng kh√¥ng ƒë·ªß quy·ªÅn (HTTP 403).</li>
<li><code>SignInAsync</code>: T·∫°o th√¥ng tin ƒëƒÉng nh·∫≠p (cookie ho·∫∑c token).</li>
<li><code>SignOutAsync</code>: X√≥a th√¥ng tin ƒëƒÉng nh·∫≠p.</li>
</ul>
<blockquote class="blockquote">
<p>üí° Tip: Interface n√†y ƒë∆∞·ª£c .NET cung c·∫•p m·∫∑c ƒë·ªãnh th√¥ng qua dependency injection.
B·∫°n c√≥ th·ªÉ inject <code>IAuthenticationService</code> v√†o Controller n·∫øu mu·ªën th·ª±c hi·ªán x√°c th·ª±c
th·ªß c√¥ng.<br />
üìò Tham kh·∫£o: <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.authentication.iauthenticationservice?view=aspnetcore-9.0">Microsoft Docs ‚Äì Authentication service</a></p>
</blockquote>
<h2 id="authentication-scheme">Authentication Scheme</h2>
<p>M·ªói scheme l√† m·ªôt c·∫•u h√¨nh x√°c th·ª±c c·ª• th·ªÉ, x√°c ƒë·ªãnh handler n√†o s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng cho c∆° ch·∫ø ƒë√≥.
. Khi c·∫•u h√¨nh, b·∫°n c√≥ th·ªÉ ƒëƒÉng k√Ω
nhi·ªÅu Scheme, v√≠ d·ª• scheme d√πng JWT cho API, m·ªôt scheme kh√°c d√πng Cookie cho MVC web.</p>
<pre><code class="language-csharp">builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(JwtBearerDefaults.AuthenticationScheme, options =&gt; builder.Configuration.Bind(&quot;JwtSettings&quot;, options))
    .AddCookie(CookieAuthenticationDefaults.AuthenticationScheme, options =&gt; builder.Configuration.Bind(&quot;CookieSettings&quot;, options));
</code></pre>
<p>Khi x√°c th·ª±c, <code>IAuthenticationService</code> s·∫Ω tra c·ª©u t√™n scheme ƒë·ªÉ g·ªçi handler t∆∞∆°ng ·ª©ng.</p>
<blockquote class="blockquote">
<p>üí° Tip: Khi ·ª©ng d·ª•ng c√≥ nhi·ªÅu scheme (JWT cho API, Cookie cho Web), b·∫°n c√≥ th·ªÉ
d√πng <code>[Authorize(AuthenticationSchemes = &quot;JwtBearer&quot;)]</code> ƒë·ªÉ bu·ªôc controller/action ch·ªâ
d√πng ƒë√∫ng lo·∫°i x√°c th·ª±c mong mu·ªën.</p>
</blockquote>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: N·∫øu b·∫°n kh√¥ng ƒë·∫∑t <code>DefaultScheme</code>, h·ªá th·ªëng s·∫Ω kh√¥ng bi·∫øt d√πng handler n√†o v√†
<code>AuthenticateAsync()</code> c√≥ th·ªÉ tr·∫£ v·ªÅ null.</p>
</blockquote>
<h2 id="authentication-handler">Authentication Handler</h2>
<p>Handler l√† th√†nh ph·∫ßn th·ª±c thi c·ªët l√µi c·ªßa qu√° tr√¨nh x√°c th·ª±c.
M·ªói scheme s·∫Ω t∆∞∆°ng ·ª©ng v·ªõi m·ªôt handler c·ª• th·ªÉ, v√≠ d·ª•:</p>
<ul>
<li><code>CookieAuthenticationHandler</code>: Qu·∫£n l√Ω x√°c th·ª±c d·ª±a tr√™n cookie.</li>
<li><code>JwtBearerHandler</code>: Qu·∫£n l√Ω x√°c th·ª±c d·ª±a tr√™n JWT.</li>
<li><code>OpenIdConnectHandler</code>: Qu·∫£n l√Ω x√°c th·ª±c theo chu·∫©n OpenIDConnect hay WS-Federation.</li>
<li><code>RemoteAuthenticationHandler</code>: OAuth2/External Provider nh∆∞ Google, Facebook...</li>
</ul>
<p>M·ªôt handler c√≥ tr√°ch nhi·ªám x·ª≠ l√Ω 3 nhi·ªám v·ª• ch√≠nh:</p>
<ul>
<li><strong>Authenticate:</strong> ƒê·ªçc v√† x√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p (cookie ho·∫∑c token) v√† t·∫°o danh t√≠nh
ng∆∞·ªùi d√πng (ƒë·ªëi t∆∞·ª£ng <code>ClaimsPrincipal</code>).</li>
<li><strong>Challenge:</strong> Ph·∫£n h·ªìi khi m·ªôt ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p c·ªë truy c·∫≠p v√†o
t√†i nguy√™n ƒë∆∞·ª£c b·∫£o v·ªá (nh∆∞ chuy·ªÉn h∆∞·ªõng ng∆∞·ªùi d√πng ƒë·∫øn trang ƒëƒÉng nh·∫≠p ho·∫∑c tr·∫£ v·ªÅ HTTP 401 Unauthorized).</li>
<li><strong>Forbid:</strong> Ph·∫£n h·ªìi khi m·ªôt ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p nh∆∞ng kh√¥ng c√≥
quy·ªÅn truy c·∫≠p (tr·∫£ v·ªÅ HTTP 403 Forbidden).</li>
</ul>
<blockquote class="blockquote">
<p>üí° Tip: M·ªôt handler c√≥ th·ªÉ k·∫ø th·ª´a t·ª´ <code>AuthenticationHandler&lt;TOptions&gt;</code> ƒë·ªÉ b·∫°n vi·∫øt
custom authentication.
B·∫°n ch·ªâ c·∫ßn override <code>HandleAuthenticateAsync()</code> ƒë·ªÉ t·ª± x√°c ƒë·ªãnh danh t√≠nh ng∆∞·ªùi d√πng.</p>
</blockquote>
<h2 id="claimsprincipal-danh-tinh-cua-nguoi-dung">ClaimsPrincipal - Danh t√≠nh c·ªßa ng∆∞·ªùi d√πng</h2>
<p>Sau khi x√°c th·ª±c th√†nh c√¥ng, th√¥ng tin ng∆∞·ªùi d√πng ƒë∆∞·ª£c l∆∞u v√†o
<code>ClaimsPrincipal</code>, m·ªôt ƒë·ªëi t∆∞·ª£ng ƒë·∫°i di·ªán cho ng∆∞·ªùi d√πng trong h·ªá th·ªëng.
C·∫•u tr√∫c c·ªßa <code>ClaimsPrincipal</code> g·ªìm:</p>
<ul>
<li><code>Claim</code>: L√† m·ªôt m·∫£nh th√¥ng tin v·ªÅ ng∆∞·ªùi d√πng, ƒë∆∞·ª£c l∆∞u tr·ªØ d∆∞·ªõi d·∫°ng c·∫∑p key-value, t∆∞∆°ng t·ª±
nh∆∞ m·ªôt d√≤ng th√¥ng tin trong cƒÉn c∆∞·ªõc c√¥ng d√¢n (H·ªç v√† t√™n: Nguy·ªÖn VƒÉn A; Ng√†y sinh: 01/01/1990).</li>
<li><code>ClaimsIdentity</code>: M·ªôt t·∫≠p h·ª£p c√°c Claim, t∆∞∆°ng t·ª± nh∆∞ nh∆∞ m·ªôt lo·∫°i gi·∫•y t·ªù tu·ª≥ th√¢n (cƒÉn c∆∞·ªõc c√¥ng d√¢n, gi·∫•y ph√©p l√°i xe, h·ªô chi·∫øu).</li>
<li><code>ClaimsPrincipal</code>: Ch·ª©a m·ªôt ho·∫∑c nhi·ªÅu ClaimsIdentity, ƒë·∫°i di·ªán cho ng∆∞·ªùi d√πng hi·ªán t·∫°i. Gi·ªëng
vi·ªác m·ªôt ng∆∞·ªùi c√≥ th·ªÉ c√≥ nhi·ªÅu lo·∫°i gi·∫•y t·ªù t√πy th√¢n.</li>
</ul>
<pre><code class="language-csharp">// T∆∞·ªüng t∆∞·ª£ng ClaimsPrincipal nh∆∞ m·ªôt chi·∫øc v√≠ ch·ª©a nhi·ªÅu lo·∫°i gi·∫•y t·ªù c·ªßa m·ªôt ng∆∞·ªùi
var principal = new ClaimsPrincipal();

// Gi·∫•y t·ªù 1: CƒÉn c∆∞·ªõc c√¥ng d√¢n (Identity ch√≠nh)
var nationalId = new ClaimsIdentity(new[]
{
    new Claim(ClaimTypes.NameIdentifier, &quot;12345&quot;),  // S·ªë CCCD
    new Claim(ClaimTypes.Name, &quot;Nguy·ªÖn VƒÉn A&quot;),     // H·ªç t√™n
    new Claim(ClaimTypes.DateOfBirth, &quot;1990-01-01&quot;) // Ng√†y sinh
}, &quot;NationalID&quot;);

// Gi·∫•y t·ªù 2: B·∫±ng l√°i xe (Identity th·ª© 2)
var driverLicense = new ClaimsIdentity(new[]
{
    new Claim(&quot;LicenseNumber&quot;, &quot;DL-123456&quot;),
    new Claim(&quot;VehicleType&quot;, &quot;B2&quot;),
    new Claim(&quot;ExpiryDate&quot;, &quot;2030-12-31&quot;)
}, &quot;DriverLicense&quot;);

// Cho c·∫£ 2 v√†o v√≠
principal.AddIdentity(nationalId);
principal.AddIdentity(driverLicense);
</code></pre>
<p>Trong ·ª©ng d·ª•ng .NET, b·∫°n c√≥ th·ªÉ truy c·∫≠p ƒë·ªëi t∆∞·ª£ng n√†y th√¥ng qua <code>HttpContext.User</code>:</p>
<pre><code class="language-csharp">var userName = HttpContext.User.Identity.Name;
var roles = HttpContext.User.Claims
                .Where(c =&gt; c.Type == ClaimTypes.Role)
                .Select(c =&gt; c.Value);
</code></pre>
<blockquote class="blockquote">
<p>üí° Tip: Trong .NET, ch·ªâ m·ªôt identity ƒë∆∞·ª£c xem l√† ch√≠nh (<code>User.Identity</code>). N·∫øu c√≥ nhi·ªÅu
identity (v√≠ d·ª• th√™m t·ª´ external provider), b·∫°n n√™n h·ª£p nh·∫•t claim ho·∫∑c ch·ªâ gi·ªØ l·∫°i
m·ªôt identity c·∫ßn thi·∫øt.</p>
</blockquote>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: M·ªôt s·ªë middleware (v√≠ d·ª• OpenID Connect) c√≥ th·ªÉ th√™m nhi·ªÅu identity v√†o
c√πng m·ªôt principal n√™n c·∫ßn c·∫©n tr·ªçng n·∫øu serialize ho·∫∑c l∆∞u v√†o cookie.</p>
</blockquote>
<h2 id="luong-hoat-ong-cua-authentication">Lu·ªìng ho·∫°t ƒë·ªông c·ªßa Authentication</h2>
<p>ƒê·ªÉ h√¨nh dung r√µ h∆°n v·ªÅ pipeline x√°c th·ª±c trong .NET, xem s∆° ƒë·ªì sau:</p>
<div class="mermaid">
flowchart TD
    subgraph Client["üßë‚Äçüíª Client"]
    end
    subgraph Pipeline["üåê ASP.NET Core Middleware Pipeline"]
        A["Authentication Middleware"]
        B["IAuthenticationService"]
        C["Authentication Scheme"]
        D["Authentication Handler"]
        E["ClaimsPrincipal"]
        F["Authorization Middleware"]
    end
    subgraph AuthZ["üß≠ Authorization Layer"]
        G["IAuthorizationService"]
        H["IAuthorizationHandler"]
        I["Access Granted/Denied"]
    end
    Client --> A
    A -->|AuthenticateAsync| B
    B --> C
    C --> D
    D -->|Tr·∫£ v·ªÅ ClaimsPrincipal| E
    E -->|G√°n v√†o HttpContext.User| F
    F -->|G·ªçi AuthorizeAsync| G
    G --> H
    H -->|K·∫øt qu·∫£ ƒë√°nh gi√° policy| I
</div>
<blockquote class="blockquote">
<p>üí° Tip: <code>HttpContext.User</code> lu√¥n t·ªìn t·∫°i, ngay c·∫£ khi ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p,
nh∆∞ng khi ƒë√≥ <code>User.Identity.IsAuthenticated == false</code>. Do ƒë√≥ kh√¥ng d√πng User != null ƒë·ªÉ ki·ªÉm tra
ƒëƒÉng nh·∫≠p.</p>
</blockquote>
<h1 id="cookie-authentication-thuong-dung-cho-web-app-nhu.net-mvc-va-razor-pages">Cookie Authentication (th∆∞·ªùng d√πng cho Web App nh∆∞ .NET MVC v√† Razor Pages)</h1>
<p>Cookie Authentication l√† m·ªôt trong nh·ªØng ph∆∞∆°ng ph√°p x√°c th·ª±c ph·ªï bi·∫øn nh·∫•t trong c√°c ·ª©ng d·ª•ng web.
N√≥ s·ª≠ d·ª•ng cookie ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin x√°c th·ª±c c·ªßa ng∆∞·ªùi d√πng sau khi h·ªç ƒëƒÉng nh·∫≠p th√†nh c√¥ng.
D∆∞·ªõi ƒë√¢y l√† c√°ch tri·ªÉn khai Cookie Authentication trong .NET:</p>
<blockquote class="blockquote">
<p>üí° Tip: Cookie x√°c th·ª±c trong ASP.NET Core ƒë∆∞·ª£c m√£ h√≥a v√† b·∫£o v·ªá b·∫±ng <code>IDataProtector</code>,
v√¨ v·∫≠y kh√¥ng th·ªÉ ƒë·ªçc plain text claim trong cookie.</p>
</blockquote>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: Cookie authentication ph·ª• thu·ªôc v√†o state (cookie l∆∞u session tr√™n client)
n√™n kh√¥ng ph√π h·ª£p cho API RESTful, v√¨ API n√™n stateless.</p>
</blockquote>
<p><strong>B∆∞·ªõc 1: C·∫•u h√¨nh Cookie Authentication</strong></p>
<pre><code class="language-csharp">var builder = WebApplication.CreateBuilder(args);

// ƒêƒÉng k√Ω d·ªãch v·ª• x√°c th·ª±c v·ªõi Scheme m·∫∑c ƒë·ªãnh l√† Cookies
builder.Services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)
    .AddCookie(options =&gt;
    {
        options.Cookie.Name = &quot;MyAppCookie&quot;;
        options.LoginPath = &quot;/Account/Login&quot;; // ƒê∆∞·ªùng d·∫´n t·ªõi trang ƒëƒÉng nh·∫≠p
        options.AccessDeniedPath = &quot;/Account/AccessDenied&quot;; // ƒê∆∞·ªùng d·∫´n khi b·ªã t·ª´ ch·ªëi truy c·∫≠p
        options.ExpireTimeSpan = TimeSpan.FromMinutes(20); // Th·ªùi gian cookie h·∫øt h·∫°n
        options.SlidingExpiration = true; // T·ª± ƒë·ªông gia h·∫°n n·∫øu c√≤n ho·∫°t ƒë·ªông
        options.Cookie.HttpOnly = true; // B·∫£o v·ªá cookie kh·ªèi JavaScript
        options.Cookie.SecurePolicy = CookieSecurePolicy.Always; // Ch·ªâ g·ª≠i cookie qua HTTPS
    });

builder.Services.AddControllersWithViews();

var app = builder.Build();

app.UseRouting();

// UseAuthentication ph·∫£i ƒë∆∞·ª£c ƒë·∫∑t sau UseRouting v√† tr∆∞·ªõc UseAuthorization
app.UseAuthentication(); // Middleware n√†y thi·∫øt l·∫≠p HttpContext.User
app.UseAuthorization(); // Middleware n√†y th·ª±c thi vi·ªác ph√¢n quy·ªÅn

app.MapControllers();

app.Run();
</code></pre>
<p><strong>B∆∞·ªõc 2: ƒêƒÉng nh·∫≠p v√† t·∫°o Cookie</strong></p>
<p>Khi ng∆∞·ªùi d√πng g·ª≠i th√¥ng tin ƒëƒÉng nh·∫≠p, b·∫°n s·∫Ω t·∫°o <code>ClaimsPrincipal</code> r·ªìi
g·ªçi <code>SignInAsync</code> ƒë·ªÉ t·∫°o v√† l∆∞u cookie:</p>
<pre><code class="language-csharp">[HttpPost]
public async Task&lt;IActionResult&gt; Login(LoginModel model)
{
    if (!ModelState.IsValid)
        return View(model);

    var user = await AuthenticateUser(model.UserName, model.Password);
    if (user == null)
    {
        ModelState.AddModelError(&quot;&quot;, &quot;T√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng&quot;);
        return View(model);
    }

    var claims = new List&lt;Claim&gt;
    {
        new Claim(ClaimTypes.NameIdentifier, user.Id),
        new Claim(ClaimTypes.Name, user.UserName),
        new Claim(ClaimTypes.Role, &quot;Member&quot;),
        new Claim(&quot;FavoriteDrink&quot;, &quot;Tea&quot;)
    };

    var identity = new ClaimsIdentity(claims, CookieAuthenticationDefaults.AuthenticationScheme);
    var principal = new ClaimsPrincipal(identity);

    await HttpContext.SignInAsync(
        CookieAuthenticationDefaults.AuthenticationScheme, 
        principal,
        new AuthenticationProperties
        {
            IsPersistent = model.RememberMe, // Ghi nh·ªõ ƒëƒÉng nh·∫≠p
            ExpiresUtc = DateTimeOffset.UtcNow.AddMinutes(20)
        });

    return LocalRedirect(model.ReturnUrl ?? &quot;/&quot;);
}
</code></pre>
<p>ƒê·ªÉ ƒëƒÉng xu·∫•t, b·∫°n ch·ªâ c·∫ßn g·ªçi <code>SignOutAsync</code>, h·ªá th·ªëng s·∫Ω x√≥a cookie x√°c th·ª±c:</p>
<pre><code class="language-csharp">[Authorize]
public async Task&lt;IActionResult&gt; Logout()
{
    await HttpContext.SignOutAsync(CookieAuthenticationDefaults.AuthenticationScheme);
    return RedirectToAction(&quot;Index&quot;, &quot;Home&quot;);
}
</code></pre>
<h1 id="jwt-bearer-authentication-thuong-dung-cho-api">JWT Bearer Authentication (th∆∞·ªùng d√πng cho API)</h1>
<h2 id="jwt-la-gi">JWT l√† g√¨?</h2>
<p>JWT (JSON Web Token) l√† m·ªôt token t·ª± ch·ª©a (self-contained) d∆∞·ªõi d·∫°ng json g·ªìm 3 ph·∫ßn:</p>
<ul>
<li>Header: lo·∫°i thu·∫≠t to√°n k√Ω (v√≠ d·ª• HS256).</li>
<li>Payload: ch·ª©a c√°c <code>claims</code> (th√¥ng tin v·ªÅ ng∆∞·ªùi d√πng nh∆∞ id, email...).</li>
<li>Signature: d√πng ƒë·ªÉ x√°c minh t√≠nh to√†n v·∫πn (ƒë∆∞·ª£c k√Ω b·∫±ng secret key).</li>
</ul>
<p>V√≠ d·ª•:</p>
<pre><code class="language-javascript">{
  &quot;sub&quot;: &quot;user123&quot;,
  &quot;name&quot;: &quot;Alice&quot;,
  &quot;role&quot;: &quot;Admin&quot;,
  &quot;exp&quot;: 1734567890
}
</code></pre>
<blockquote class="blockquote">
<p>üí° Tip: JWT l√† d·∫°ng stateless authentication, token kh√¥ng c·∫ßn l∆∞u server-side.
Do ƒë√≥, khi user ƒë·ªïi m·∫≠t kh·∫©u ho·∫∑c b·ªã kh√≥a t√†i kho·∫£n, token c≈© v·∫´n c√≤n hi·ªáu l·ª±c cho t·ªõi
khi h·∫øt h·∫°n -&gt; c·∫ßn c√≥ c∆° ch·∫ø blacklist token n·∫øu c·∫ßn.</p>
</blockquote>
<h2 id="cau-hinh-jwt-bearer-trong.net">C·∫•u h√¨nh JWT Bearer trong .NET</h2>
<p>ƒê·∫ßu ti√™n c·∫ßn ƒëƒÉng k√Ω Service v√† Middleware:</p>
<pre><code class="language-csharp">// Program.cs
using Microsoft.AspNetCore.Authentication.JwtBearer;
using Microsoft.IdentityModel.Tokens;
using System.Text;

var builder = WebApplication.CreateBuilder(args);

// C·∫•u h√¨nh JwtSettings trong appsettings.json (Issuer, Audience, SecretKey, ExpireMinutes)
var jwtSettings = builder.Configuration.GetSection(&quot;JwtSettings&quot;);

// Th√™m Authentication v·ªõi JWT Bearer
builder.Services.AddAuthentication(options =&gt;
{
    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;
})
.AddJwtBearer(options =&gt;
{
    options.RequireHttpsMetadata = true;
    options.SaveToken = true;
    options.TokenValidationParameters = new TokenValidationParameters
    {
        ValidateIssuer = true,
        ValidIssuer = jwtSettings[&quot;Issuer&quot;],

        ValidateAudience = true,
        ValidAudience = jwtSettings[&quot;Audience&quot;],

        ValidateIssuerSigningKey = true,
        IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(jwtSettings[&quot;SecretKey&quot;])),

        RequireExpirationTime = true,
        ValidateLifetime = true,
        ClockSkew = TimeSpan.FromSeconds(30)
    };
});

builder.Services.AddAuthorization();
</code></pre>
<p>Ti·∫øp theo t·∫°o JWT:</p>
<pre><code class="language-csharp">public class JwtTokenService
{
    private readonly IConfiguration _config;

    public JwtTokenService(IConfiguration config)
    {
        _config = config;
    }

    public string GenerateToken(User user)
    {
        var jwtSettings = _config.GetSection(&quot;JwtSettings&quot;);
        var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(jwtSettings[&quot;SecretKey&quot;]));
        var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);

        var claims = new List&lt;Claim&gt;
        {
            new Claim(ClaimTypes.NameIdentifier, user.Id),
            new Claim(ClaimTypes.Name, user.Username),
            new Claim(ClaimTypes.Role, user.Role),
            // th√™m claim kh√°c n·∫øu c·∫ßn
        };

        var token = new JwtSecurityToken(
            issuer: jwtSettings[&quot;Issuer&quot;],
            audience: jwtSettings[&quot;Audience&quot;],
            claims: claims,
            expires: DateTime.UtcNow.AddMinutes(double.Parse(jwtSettings[&quot;ExpireMinutes&quot;])),
            signingCredentials: creds
        );

        return new JwtSecurityTokenHandler().WriteToken(token);
    }
}
</code></pre>
<h1 id="authorization-kiem-soat-quyen-truy-cap">Authorization - Ki·ªÉm so√°t quy·ªÅn truy c·∫≠p</h1>
<h2 id="kien-truc-authorization-trong.net">Ki·∫øn tr√∫c Authorization trong .NET</h2>
<p>Sau khi ng∆∞·ªùi d√πng ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c (Authentication), h·ªá th·ªëng c·∫ßn ki·ªÉm tra quy·ªÅn truy c·∫≠p
(Authorization) tr∆∞·ªõc khi cho ph√©p th·ª±c hi·ªán h√†nh ƒë·ªông ho·∫∑c truy c·∫≠p t√†i nguy√™n.</p>
<p>C∆° ch·∫ø Authorization trong .NET ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n 4 th√†nh ph·∫ßn ch√≠nh, li√™n k·∫øt ch·∫∑t
ch·∫Ω v·ªõi t·∫ßng Authentication:</p>
<table class="table">
<thead>
<tr>
<th>Th√†nh ph·∫ßn</th>
<th>Vai tr√≤</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Authorization Middleware</strong></td>
<td>Th√†nh ph·∫ßn trong pipeline ch·ªãu tr√°ch nhi·ªám g·ªçi <code>IAuthorizationService.AuthorizeAsync()</code> ƒë·ªÉ x√°c ƒë·ªãnh quy·ªÅn truy c·∫≠p.</td>
</tr>
<tr>
<td><strong>IAuthorizationService</strong></td>
<td>B·ªô ƒëi·ªÅu ph·ªëi ch√≠nh ‚Äî x·ª≠ l√Ω logic ƒë√°nh gi√° policy ho·∫∑c y√™u c·∫ßu quy·ªÅn truy c·∫≠p.</td>
</tr>
<tr>
<td><strong>IAuthorizationHandler</strong></td>
<td>X·ª≠ l√Ω t·ª´ng y√™u c·∫ßu (requirement) c·ª• th·ªÉ trong policy, x√°c ƒë·ªãnh ng∆∞·ªùi d√πng c√≥ ƒë·∫°t ƒëi·ªÅu ki·ªán kh√¥ng.</td>
</tr>
<tr>
<td><strong>Authorization Requirement / Policy</strong></td>
<td>M√¥ t·∫£ ƒëi·ªÅu ki·ªán c·∫ßn th·ªèa m√£n ƒë·ªÉ truy c·∫≠p t√†i nguy√™n (v√≠ d·ª•: y√™u c·∫ßu vai tr√≤, claim, ho·∫∑c ƒëi·ªÅu ki·ªán t√πy ch·ªânh).</td>
</tr>
</tbody>
</table>
<h2 id="moi-quan-he-giua-cac-thanh-phan">M·ªëi quan h·ªá gi·ªØa c√°c th√†nh ph·∫ßn</h2>
<div class="mermaid">
flowchart LR
    subgraph Authentication["üîê T·∫ßng Authentication"]
        E["ClaimsPrincipal<br/>(Danh t√≠nh ng∆∞·ªùi d√πng)"]
    end
    subgraph Authorization["üß≠ T·∫ßng Authorization (4 th√†nh ph·∫ßn)"]
        F["Authorization Middleware"]
        G["IAuthorizationService"]
        H["IAuthorizationHandler"]
        I["Policy/Requirement"]
        J["Access Granted /Denied"]
    end
    E --> F
    F -->|G·ªçi AuthorizeAsync| G
    G -->|ƒê√°nh gi√° Policy| H
    H -->|Ki·ªÉm tra Requirement| I
    I -->|K·∫øt qu·∫£| J
</div>
<h2 id="luong-hoat-ong-cua-authorization">Lu·ªìng ho·∫°t ƒë·ªông c·ªßa Authorization</h2>
<div class="mermaid">
sequenceDiagram
    participant C as Client
    participant M as AuthorizationMiddleware
    participant S as IAuthorizationService
    participant H as IAuthorizationHandler
    participant P as PolicyRequirement
    C->>M: G·ª≠i HTTP Request (ƒë√£ c√≥ ClaimsPrincipal)
    M->>S: G·ªçi AuthorizeAsync()
    S->>H: G·ª≠i t·ª´ng Requirement trong Policy
    H->>P: ƒê√°nh gi√° ƒëi·ªÅu ki·ªán
    P-->>H: K·∫øt qu·∫£ t·ª´ng Requirement
    H-->>S: T·∫•t c·∫£ Requirement th·ªèa m√£n?
    S-->>M: Access Granted ho·∫∑c Denied
    M-->>C: Tr·∫£ v·ªÅ 403 Forbidden ho·∫∑c cho ph√©p truy c·∫≠p Controller
    Note over M,C: N·∫øu ƒë∆∞·ª£c ph√©p th√¨ ti·∫øp t·ª•c th·ª±c thi Controller Action
</div>
<h2 id="trien-khai-trong.net-mvc-hoac-api">Tri·ªÉn khai trong .NET MVC (ho·∫∑c API)</h2>
<h3 id="role-based-authorization">Role-based Authorization</h3>
<p>Ph√¢n quy·ªÅn d·ª±a theo vai tr√≤.
√Åp d·ª•ng khi b·∫°n g√°n role cho ng∆∞·ªùi d√πng (Admin, Manager, Premium Member, ...):</p>
<pre><code class="language-csharp">[Authorize(Roles = &quot;Admin,Manager&quot;)]
public IActionResult Dashboard()
{
    return View();
}
</code></pre>
<blockquote class="blockquote">
<p>üí° Tip: C√≥ th·ªÉ khai b√°o nhi·ªÅu role trong 1 attribute b·∫±ng d·∫•u ph·∫©y: <code>[Authorize(Roles = &quot;Admin,Manager&quot;)]</code></p>
</blockquote>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: Role ch·ªâ n√™n d√πng cho h·ªá th·ªëng nh·ªè. Khi h·ªá th·ªëng c√≥ nhi·ªÅu quy·ªÅn chi ti·∫øt
(v√≠ d·ª• &quot;Xem ƒë∆°n h√†ng&quot;, &quot;S·ª≠a ƒë∆°n h√†ng&quot;), n√™n chuy·ªÉn sang policy-based authorization ƒë·ªÉ
linh ho·∫°t h∆°n.</p>
</blockquote>
<h3 id="claims-based-authorization">Claims-based Authorization</h3>
<p>Ph√¢n quy·ªÅn d·ª±a v√†o gi√° tr·ªã c·ª• th·ªÉ c·ªßa <code>Claim</code>:</p>
<pre><code class="language-csharp">[Authorize(Policy = &quot;CanDrinkTea&quot;)]
public IActionResult TeaLounge() =&gt; View();
</code></pre>
<p>C·∫•u h√¨nh policy:</p>
<pre><code class="language-csharp">builder.Services.AddAuthorization(options =&gt;
{
    options.AddPolicy(&quot;CanDrinkTea&quot;, policy =&gt;
        policy.RequireClaim(&quot;FavoriteDrink&quot;, &quot;Tea&quot;));
});
</code></pre>
<blockquote class="blockquote">
<p>üí° Tip: Claim l√† d·ªØ li·ªáu ƒë·ªông n√™n b·∫°n c√≥ th·ªÉ th√™m claim &quot;FavoriteDrink&quot; ho·∫∑c &quot;Department&quot; t√πy ng∆∞·ªùi d√πng.
ƒêi·ªÅu n√†y c·ª±c k·ª≥ ti·ªán n·∫øu mu·ªën x√°c th·ª±c theo context kinh doanh
(V√≠ d·ª•: ch·ªâ cho ph√©p ng∆∞·ªùi d√πng u·ªëng tr√† v√†o).</p>
</blockquote>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: N·∫øu claim ƒë∆∞·ª£c load t·ª´ c∆° s·ªü d·ªØ li·ªáu, h√£y cache ho·∫∑c s·ª≠ d·ª•ng
<code>IClaimsTransformation</code> ƒë·ªÉ tr√°nh truy v·∫•n DB m·ªói request.</p>
</blockquote>
<h3 id="policy-based-authorization">Policy-based Authorization</h3>
<p>Cho ph√©p k·∫øt h·ª£p nhi·ªÅu ƒëi·ªÅu ki·ªán (role, claim, custom logic).
D√πng khi quy·ªÅn truy c·∫≠p ph·ª©c t·∫°p, c·∫ßn custom logic.
V√≠ d·ª• custom handler:</p>
<p>T·∫°o requirement v√† handler:</p>
<pre><code class="language-csharp">public class MinimumAgeRequirement : IAuthorizationRequirement
{
    public int Age { get; }
    public MinimumAgeRequirement(int age) =&gt; Age = age;
}

public class MinimumAgeHandler : AuthorizationHandler&lt;MinimumAgeRequirement&gt;
{
    protected override Task HandleRequirementAsync(
        AuthorizationHandlerContext context, MinimumAgeRequirement requirement)
    {
        var birthDateClaim = context.User.FindFirst(c =&gt; c.Type == &quot;BirthDate&quot;);
        if (birthDateClaim == null)
            return Task.CompletedTask;

        var birthDate = DateTime.Parse(birthDateClaim.Value);
        var age = DateTime.Today.Year - birthDate.Year;

        if (age &gt;= requirement.Age)
            context.Succeed(requirement);

        return Task.CompletedTask;
    }
}
</code></pre>
<p>ƒêƒÉng k√Ω policy:</p>
<pre><code class="language-csharp">builder.Services.AddAuthorization(options =&gt;
{
    options.AddPolicy(&quot;AtLeast18&quot;, policy =&gt;
        policy.Requirements.Add(new MinimumAgeRequirement(18)));
});

builder.Services.AddSingleton&lt;IAuthorizationHandler, MinimumAgeHandler&gt;();
</code></pre>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: ƒê·ª´ng qu√™n ƒëƒÉng k√Ω handler b·∫±ng <code>AddSingleton&lt;IAuthorizationHandler, THandler&gt;()</code>.
N·∫øu kh√¥ng, policy s·∫Ω kh√¥ng ƒë∆∞·ª£c k√≠ch ho·∫°t.</p>
</blockquote>
<h3 id="resource-based-authorization">Resource-based Authorization</h3>
<p>D√πng resource-based Authorization khi quy·ªÅn ph·ª• thu·ªôc c·ª• th·ªÉ v√†o m·ªôt t√†i nguy√™n c·ª• th·ªÉ
(document, order hay photo).
V√≠ d·ª•: Khi c·∫ßn ph√¢n quy·ªÅn &quot;ch·ªâ ch·ªß s·ªü h·ªØu b√†i vi·∫øt ƒë∆∞·ª£c ch·ªânh s·ª≠a b√†i vi·∫øt c·ªßa h·ªç&quot;.
ƒê√¢y l√† ownership check, kh√¥ng th·ªÉ ch·ªâ d·ª±a tr√™n role hay claim.</p>
<p>ƒê·ªãnh nghƒ©a Requirement:</p>
<pre><code class="language-csharp">public class DocumentEditRequirement : IAuthorizationRequirement { }
</code></pre>
<p>ƒê·ªãnh nghƒ©a Handler (resource-based):</p>
<pre><code class="language-csharp">public class DocumentEditHandler : AuthorizationHandler&lt;DocumentEditRequirement, Document&gt;
{
    protected override Task HandleRequirementAsync(
        AuthorizationHandlerContext context,
        DocumentEditRequirement requirement,
        Document resource)
    {
        // N·∫øu l√† Admin th√¨ pass
        if (context.User.IsInRole(&quot;Admin&quot;))
        {
            context.Succeed(requirement);
            return Task.CompletedTask;
        }

        // Ownership check - resource.OwnerId so v·ªõi user claim
        var userId = context.User.FindFirst(ClaimTypes.NameIdentifier)?.Value;
        if (userId != null &amp;&amp; resource.OwnerId == userId)
        {
            context.Succeed(requirement);
        }

        return Task.CompletedTask;
    }
}
</code></pre>
<p>ƒêƒÉng k√Ω handler trong <code>Program.cs</code>:</p>
<pre><code class="language-csharp">builder.Services.AddAuthorization();
builder.Services.AddSingleton&lt;IAuthorizationHandler, DocumentEditHandler&gt;();
</code></pre>
<p>S·ª≠ d·ª•ng <code>IAuthorizationService</code> trong Controller:</p>
<pre><code class="language-csharp">public class DocumentsController : Controller
{
    private readonly IAuthorizationService _authorizationService;
    private readonly IDocumentRepository _repo;

    public DocumentsController(IAuthorizationService authorizationService, IDocumentRepository repo)
    {
        _authorizationService = authorizationService;
        _repo = repo;
    }

    [HttpPost]
    public async Task&lt;IActionResult&gt; Edit(Guid id, DocumentEditModel model)
    {
        var doc = await _repo.GetByIdAsync(id);
        if (doc == null) return NotFound();

        var authResult = await _authorizationService.AuthorizeAsync(User, doc, new DocumentEditRequirement());
        if (!authResult.Succeeded) return Forbid();

        // th·ª±c hi·ªán update
        // ...
        return Ok();
    }
}
</code></pre>
<blockquote class="blockquote">
<p>‚ö†Ô∏è Note: Kh√¥ng th·ªÉ d√πng <code>[Authorize]</code> attribute cho ki·ªÉu n√†y, v√¨ requirement c·∫ßn
object c·ª• th·ªÉ ƒë·ªÉ so s√°nh (v√≠ d·ª• Document).</p>
</blockquote>
<h1 id="claims-transformation">Claims Transformation</h1>
<p>D√πng <code>IClaimsTransformation</code> ƒë·ªÉ th√™m ho·∫∑c s·ª≠a claim sau khi x√°c th·ª±c.<br />
V√≠ d·ª•: load roles/permissions t·ª´ DB v√† th√™m claim khi user login.</p>
<pre><code class="language-csharp">public class ClaimsTransformer : IClaimsTransformation
{
    public Task&lt;ClaimsPrincipal&gt; TransformAsync(ClaimsPrincipal principal)
    {
        var id = ((ClaimsIdentity)principal.Identity);
        var permission = GetUserPermissionFromDatabase(id);
        id.AddClaim(new Claim(&quot;Permission&quot;, permission));
        return Task.FromResult(principal);
    }
}
</code></pre>
<blockquote class="blockquote">
<p><code>TransformAsync</code> ch·∫°y ·ªü m·ªói request, n√™n c·∫ßn tr√°nh truy v·∫•n DB li√™n t·ª•c. H√£y cache ho·∫∑c
d√πng in-memory permission service.</p>
</blockquote>
<blockquote class="blockquote">
<p>üìò Tham kh·∫£o: <a href="https://learn.microsoft.com/en-us/aspnet/core/security/authentication/claims?view=aspnetcore-8.0">Claims transformation ‚Äì Microsoft Docs</a></p>
</blockquote>
<p>Hy v·ªçng qua b√†i vi·∫øt n√†y, b·∫°n ƒë√£ hi·ªÉu r√µ h∆°n s·ª± kh√°c bi·ªát gi·ªØa Authentication
v√† Authorization, c≈©ng nh∆∞ c√°ch m√† .NET tri·ªÉn khai hai c∆° ch·∫ø n√†y th√¥ng qua c√°c middleware,
handler, scheme v√† service.
B·∫£o m·∫≠t kh√¥ng ch·ªâ l√† l·ªõp t∆∞·ªùng r√†o, m√† l√† n·ªÅn t·∫£ng gi√∫p h·ªá th·ªëng v·∫≠n h√†nh an to√†n, tin c·∫≠y
v√† d·ªÖ m·ªü r·ªông. H√£y lu√¥n ƒë·∫£m b·∫£o m·ªçi endpoint, service v√† h√†nh ƒë·ªông trong ·ª©ng d·ª•ng c·ªßa
b·∫°n ƒë·ªÅu ƒë∆∞·ª£c x√°c th·ª±c v√† ph√¢n quy·ªÅn ƒë√∫ng c√°ch.</p>

</div>
